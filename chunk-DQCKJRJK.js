import{e as P}from"./chunk-4TP4TLL4.js";import{a as q,b as U,c as L,d as G,e as Q,f as Y,g as z,h as H}from"./chunk-UW6SJ5K4.js";import{b as J,c as K,d as X}from"./chunk-FEKN5OEZ.js";import"./chunk-KK23B7UM.js";import{$a as c,Bb as D,C as T,G as M,Ia as k,Jb as O,Ma as d,N as I,Qb as W,Rb as j,Sa as s,Ub as B,Y as g,Za as i,_a as n,ab as x,bb as h,cb as A,da as f,db as N,ea as b,eb as V,j as E,kb as y,lb as o,nb as F,o as R,ob as _,pa as C,pb as S,qb as v,xb as w,za as l}from"./chunk-6J5GD54P.js";function Z(e){let t=new E;return O(()=>{t.next(e())}),t.asObservable()}var ee=(e,t)=>({"bg-yellow-500/20 text-yellow-300":e,"bg-green-500/20 text-green-300":t}),te=(e,t)=>({"fa-triangle-exclamation":e,"fa-check-circle":t});function ie(e,t){e&1&&(i(0,"span",24),o(1,"This may be a duplicate."),n())}function ne(e,t){if(e&1&&(x(0),i(1,"div",21),c(2,"i",22),o(3),d(4,ie,2,0,"span",23),n(),h()),e&2){let r=t.ngIf;l(),s("ngClass",w(4,ee,r.isDuplicate,!r.isDuplicate)),l(),s("ngClass",w(7,te,r.isDuplicate,!r.isDuplicate)),l(),F(" AI Analysis: This report has a ",r.similarityScore,"% similarity to existing reports. "),l(),s("ngIf",r.isDuplicate)}}function re(e,t){e&1&&(i(0,"div",26),c(1,"i",27),o(2," AI is checking for duplicates as you type... "),n())}function oe(e,t){if(e&1&&d(0,re,3,0,"div",25),e&2){let r=V();s("ngIf",r.description()&&r.description().length>10)}}function ae(e,t){e&1&&(x(0),i(1,"span"),c(2,"i",27),o(3," Submitting to Blockchain..."),n(),h())}function le(e,t){e&1&&(i(0,"span"),o(1,"Submit Anonymously"),n())}var $=class e{dataService=g(X);aiService=g(K);router=g(P);title=C("");description=C("");isSubmitting=C(!1);descriptionObservable=Z(this.description);duplicateCheckResult=J(this.descriptionObservable.pipe(T(1e3),M(),I(t=>t.length<50?R(null):this.aiService.checkForDuplicates(t))));submitReport(){this.title().trim()&&this.description().trim()&&!this.isSubmitting()&&(this.isSubmitting.set(!0),this.dataService.addReport({title:this.title(),description:this.description()}).subscribe(t=>{this.isSubmitting.set(!1),this.router.navigate(["/report",t.id])}))}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=k({type:e,selectors:[["app-create-report"]],decls:35,vars:7,consts:[["checkingDuplicate",""],["notSubmitting",""],[1,"max-w-4xl","mx-auto"],[1,"bg-[#23263A]","p-8","rounded-lg","shadow-xl"],[1,"text-3xl","font-bold","text-white","mb-6"],[1,"text-gray-400","mb-8"],[1,"space-y-6",3,"ngSubmit"],["for","title",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["type","text","id","title","name","title","placeholder","e.g., Financial Misconduct in Q3","required","",1,"w-full","bg-[#1A1C2C]","border","border-gray-600","rounded-lg","p-3","text-white","focus:ring-2","focus:ring-[#6C5DD3]","focus:outline-none",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","description","name","description","rows","10","placeholder","Describe the incident in detail...","required","",1,"w-full","bg-[#1A1C2C]","border","border-gray-600","rounded-lg","p-3","text-white","focus:ring-2","focus:ring-[#6C5DD3]","focus:outline-none",3,"ngModelChange","ngModel"],[4,"ngIf","ngIfElse"],["for","evidence",1,"block","text-sm","font-medium","text-gray-300","mb-2"],[1,"mt-2","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-600","border-dashed","rounded-md"],[1,"space-y-1","text-center"],[1,"fas","fa-file-arrow-up","mx-auto","h-12","w-12","text-gray-500"],[1,"text-sm","text-gray-400"],[1,"relative","cursor-pointer","rounded-md","font-medium","text-[#6C5DD3]","hover:text-[#584bad]"],[1,"text-xs","text-gray-500"],[1,"pt-4"],["type","submit",1,"w-full","flex","justify-center","py-3","px-4","border","border-transparent","rounded-lg","shadow-sm","text-lg","font-medium","text-white","bg-[#6C5DD3]","hover:bg-[#584bad]","disabled:bg-gray-600","disabled:cursor-not-allowed","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-[#6C5DD3]","transition-colors",3,"disabled"],[1,"mt-3","p-3","rounded-lg","text-sm",3,"ngClass"],[1,"fas",3,"ngClass"],["class","font-bold",4,"ngIf"],[1,"font-bold"],["class","mt-3 p-3 rounded-lg text-sm bg-blue-500/20 text-blue-300",4,"ngIf"],[1,"mt-3","p-3","rounded-lg","text-sm","bg-blue-500/20","text-blue-300"],[1,"fas","fa-spinner","fa-spin","mr-2"]],template:function(r,a){if(r&1){let p=A();i(0,"div",2)(1,"div",3)(2,"h1",4),o(3," Submit an Anonymous Report "),n(),i(4,"p",5),o(5," Your submission is completely anonymous. Provide as much detail as possible to ensure a thorough investigation. All data is immutably recorded on the blockchain. "),n(),i(6,"form",6),N("ngSubmit",function(){return f(p),b(a.submitReport())}),i(7,"div")(8,"label",7),o(9,"Report Title"),n(),i(10,"input",8),v("ngModelChange",function(m){return f(p),S(a.title,m)||(a.title=m),b(m)}),n()(),i(11,"div")(12,"label",9),o(13,"Detailed Description"),n(),i(14,"textarea",10),v("ngModelChange",function(m){return f(p),S(a.description,m)||(a.description=m),b(m)}),n(),d(15,ne,5,10,"ng-container",11)(16,oe,1,1,"ng-template",null,0,D),n(),i(18,"div")(19,"label",12),o(20,"Upload Evidence (Mock)"),n(),i(21,"div",13)(22,"div",14),c(23,"i",15),i(24,"p",16)(25,"span",17)(26,"span"),o(27,"Upload a file"),n()()(),i(28,"p",18),o(29,"Images or documents up to 10MB"),n()()()(),i(30,"div",19)(31,"button",20),d(32,ae,4,0,"ng-container",11)(33,le,2,0,"ng-template",null,1,D),n()()()()()}if(r&2){let p=y(17),u=y(34);l(10),_("ngModel",a.title),l(4),_("ngModel",a.description),l(),s("ngIf",a.duplicateCheckResult())("ngIfElse",p),l(16),s("disabled",!a.title||!a.description()||a.isSubmitting()),l(),s("ngIf",a.isSubmitting())("ngIfElse",u)}},dependencies:[B,W,j,H,Y,q,U,L,z,Q,G],encapsulation:2,changeDetection:0})};export{$ as CreateReportComponent};
