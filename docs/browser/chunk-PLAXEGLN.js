import{f as k}from"./chunk-KU3XBMJO.js";import{a as A,b as N,c as O,d as I,e as P,f as W,g as j,h as F}from"./chunk-HTEFNZY6.js";import{b as B,c as q,d as U}from"./chunk-UCWR6BSW.js";import"./chunk-HU3G3ZVB.js";import{B as v,E as S,Ha as w,J as _,Qa as u,Ra as g,Tb as E,U as p,Va as M,Wa as e,Xa as t,Ya as m,cb as R,ha as c,i as x,ja as D,jb as b,lb as a,n as y,nb as T,ob as f,pb as C,qb as h,xa as l}from"./chunk-ZBVGA4EN.js";function V(i){let n=new x;return D(()=>{n.next(i())}),n.asObservable()}function G(i,n){i&1&&(e(0,"span",22),a(1,"This may be a duplicate."),t())}function Q(i,n){if(i&1&&(e(0,"div",20),m(1,"i",21),a(2),u(3,G,2,0,"span",22),t()),i&2){let o=n;b("bg-yellow-500/20",o.isDuplicate)("text-yellow-300",o.isDuplicate)("bg-green-500/20",!o.isDuplicate)("text-green-300",!o.isDuplicate),l(),b("fa-triangle-exclamation",o.isDuplicate)("fa-check-circle",!o.isDuplicate),l(),T(" AI Analysis: This report has a ",o.similarityScore,"% similarity to existing reports. "),l(),g(o.isDuplicate?3:-1)}}function Y(i,n){i&1&&(e(0,"div",10),m(1,"i",23),a(2," AI is checking for duplicates as you type... "),t())}function z(i,n){i&1&&(e(0,"span"),m(1,"i",23),a(2," Submitting to Blockchain..."),t())}function H(i,n){i&1&&(e(0,"span"),a(1,"Submit Anonymously"),t())}var L=class i{constructor(){this.dataService=p(U);this.aiService=p(q);this.router=p(k);this.title=c("",{});this.description=c("",{});this.isSubmitting=c(!1,{});this.descriptionObservable=V(this.description);this.duplicateCheckResult=B(this.descriptionObservable.pipe(v(1e3),S(),_(n=>n.length<50?y(null):this.aiService.checkForDuplicates(n))))}submitReport(){this.title().trim()&&this.description().trim()&&!this.isSubmitting()&&(this.isSubmitting.set(!0),this.dataService.addReport({title:this.title(),description:this.description()}).subscribe(n=>{this.isSubmitting.set(!1),this.router.navigate(["/report",n.id])}))}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-create-report"]],decls:33,vars:5,consts:[[1,"max-w-4xl","mx-auto"],[1,"bg-[#23263A]","p-8","rounded-lg","shadow-xl"],[1,"text-3xl","font-bold","text-white","mb-6"],[1,"text-gray-400","mb-8"],[1,"space-y-6",3,"ngSubmit"],["for","title",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["type","text","id","title","name","title","placeholder","e.g., Financial Misconduct in Q3","required","",1,"w-full","bg-[#1A1C2C]","border","border-gray-600","rounded-lg","p-3","text-white","focus:ring-2","focus:ring-[#6C5DD3]","focus:outline-none",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-300","mb-2"],["id","description","name","description","rows","10","placeholder","Describe the incident in detail. Include dates, times, locations, and any individuals involved without compromising your anonymity.","required","",1,"w-full","bg-[#1A1C2C]","border","border-gray-600","rounded-lg","p-3","text-white","focus:ring-2","focus:ring-[#6C5DD3]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"mt-3","p-3","rounded-lg","text-sm",3,"bg-yellow-500/20","text-yellow-300","bg-green-500/20","text-green-300"],[1,"mt-3","p-3","rounded-lg","text-sm","bg-blue-500/20","text-blue-300"],["for","evidence",1,"block","text-sm","font-medium","text-gray-300","mb-2"],[1,"mt-2","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-600","border-dashed","rounded-md"],[1,"space-y-1","text-center"],[1,"fas","fa-file-arrow-up","mx-auto","h-12","w-12","text-gray-500"],[1,"text-sm","text-gray-400"],[1,"relative","cursor-pointer","rounded-md","font-medium","text-[#6C5DD3]","hover:text-[#584bad]"],[1,"text-xs","text-gray-500"],[1,"pt-4"],["type","submit",1,"w-full","flex","justify-center","py-3","px-4","border","border-transparent","rounded-lg","shadow-sm","text-lg","font-medium","text-white","bg-[#6C5DD3]","hover:bg-[#584bad]","disabled:bg-gray-600","disabled:cursor-not-allowed","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-[#6C5DD3]","transition-colors",3,"disabled"],[1,"mt-3","p-3","rounded-lg","text-sm"],[1,"fas"],[1,"font-bold"],[1,"fas","fa-spinner","fa-spin","mr-2"]],template:function(o,r){if(o&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"Submit an Anonymous Report"),t(),e(4,"p",3),a(5," Your submission is completely anonymous. Provide as much detail as possible to ensure a thorough investigation. All data is immutably recorded on the blockchain. "),t(),e(6,"form",4),R("ngSubmit",function(){return r.submitReport()}),e(7,"div")(8,"label",5),a(9,"Report Title"),t(),e(10,"input",6),h("ngModelChange",function(s){return C(r.title,s)||(r.title=s),s}),t()(),e(11,"div")(12,"label",7),a(13,"Detailed Description"),t(),e(14,"textarea",8),h("ngModelChange",function(s){return C(r.description,s)||(r.description=s),s}),t(),u(15,Q,4,14,"div",9)(16,Y,3,0,"div",10),t(),e(17,"div")(18,"label",11),a(19,"Upload Evidence (Mock)"),t(),e(20,"div",12)(21,"div",13),m(22,"i",14),e(23,"p",15)(24,"span",16)(25,"span"),a(26,"Upload a file"),t()()(),e(27,"p",17),a(28,"Images or documents up to 10MB"),t()()()(),e(29,"div",18)(30,"button",19),u(31,z,3,0,"span")(32,H,2,0,"span"),t()()()()()),o&2){let d;l(10),f("ngModel",r.title),l(4),f("ngModel",r.description),l(),g((d=r.duplicateCheckResult())?15:r.description().length>10?16:-1,d),l(15),M("disabled",!r.title()||!r.description()||r.isSubmitting()),l(),g(r.isSubmitting()?31:32)}},dependencies:[E,F,W,A,N,O,j,P,I],encapsulation:2,changeDetection:0})}};export{L as CreateReportComponent};
